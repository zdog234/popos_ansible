- name: install python3.8 libraries
  become_user: zanedufour
  become: true
  pip:
    name: "{{ item }}"
    executable: /home/zanedufour/.pyenv/shims/pip3.8
    extra_args: "--user"
  loop:
    - invoke
    - pipx

- name: Install packages with pipx
  become_user: zanedufour
  become: true
  command: "/home/zanedufour/.local/bin/pipx install --python python3.8 {{ item.pkg }}"
  args:
    creates:
      - /home/zanedufour/.local/bin/{{ item.cmd }}
  loop:
    - {"pkg": "black[d]", "cmd": "black"}
    - {"pkg": "pre-commit", "cmd": "pre-commit"}
  loop_control:
    label: "{{ item.pkg }}"
