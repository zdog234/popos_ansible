---
- hosts: localhost
  become: true
  pre_tasks:
    - name: update repositories
      apt: update_cache=yes
      changed_when: False

  tasks:
    - include: tasks/users.yml
    - include: tasks/cron.yml
    - include: tasks/packages.yml
    - include: tasks/gnome.yml

- hosts: localhost
  tasks:
    - name: Install pyenv into user accounts
      become_user: "{{ item.user }}"
      become: true
      include_role:
        name: markosamuli.pyenv
      vars:
        pyenv_init_shell: true
        pyenv_home: "/home/{{ item.user }}/"
        pyenv_root: "/home/{{ item.user }}/.pyenv"
        pyenv_detect_existing_install: true
        pyenv_python_versions:
          - "3.6.10"
          - "3.7.6"
          - "3.8.1"
        pyenv_global: >-
          3.6.10
          3.7.6
          3.8.1
      loop:
        - user: zanedufour
        - user: zdufour

- hosts: localhost
  become_user: zanedufour
  become: true
  tasks:
    - include: tasks/pip.yml
